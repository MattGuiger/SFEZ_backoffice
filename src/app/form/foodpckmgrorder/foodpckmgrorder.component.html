<div class="row">
  <!-- column -->
  <div class="col-lg-12">
    <div class="card">
      <div class="card-body">
        <ngb-tabset>
          <ngb-tab title="Orders">
            <ng-template ngbTabContent>
              <div class="card-body">
                <form class="mb-3">
                  <div class="row align-items-center">
                    <div class="col-xl-2 col-lg-3">
                      <label class="mb-3">Filter By:</label>
                    </div>
                    <div class="col-xl-6 col-lg-4">
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Delivery Address, Order # or Customer Name"
                        (keyup)="filterDatatable($event)"
                      />
                      <!-- <i class="fa fa-search" aria-hidden="true"></i> -->
                    </div>
                    <!-- <div class="col-xl-6 col-lg-2">
                      <select  class="form-control custom-fontsize" (change)="orderActionFilter($event, row)">
                    <option value="">Select</option>
                    <option value="Void">Void</option>
                    <option value="Refund">Refund</option>
                  </select>
                    </div> -->
                    <div class="col-xl-6 col-lg-2">
                      <input
                        type="date"
                        style="height: 32px; color: #24c6ab"
                        [(ngModel)]="datecuurent"
                        (change)="datePick($event)"
                        [ngModelOptions]="{ standalone: true }"
                      />
                    </div>
                  </div>
                  <div class="col-xl-2 col-lg-2"></div>
                </form>
                <div class="accodion-datatable">
                  <h2 style="margin-top:20px;">Order</h2>
                  <ngx-datatable
                    class="material"
                    #table
                    [rows]="filterOrders"
                    [columnMode]="'force'"
                    [headerHeight]="50"
                    [footerHeight]="50"
                    [rowHeight]="auto"
                    [limit]="5"
                    [scrollbarH]="true"
                    (activate)="onActivate($event)"
                  >
                    <!-- Row Detail Template -->
                    <ngx-datatable-row-detail [rowHeight]="auto">
                      <ng-template
                        let-row="row"
                        let-expanded="expanded"
                        ngx-datatable-row-detail-template
                      >
                        <div style="padding-left: 10px">
                          <h3>
                            <b>{{ row?.menudetails?.name }} X {{row?.menudetails?.orderquantity}} ${{row?.menudetails?.price}}</b>
                          </h3>
                          <div>Size:{{ row?.menudetails?.size }}</div>
                          <div>Add-Ons:
                            <ul>
                              <li *ngFor="let addon of row?.menudetails?.addons">
                                {{ addon.name }} (+${{addon.price}})
                              </li>
                            </ul>
                          </div>
                          <div>Instructions: 
                            <ul>
                              <li *ngFor="let instruction of row?.menudetails?.instructions">
                                {{ instruction }}
                              </li>
                            </ul>
                          </div>
                          <h3>
                            Delivery Address:
                              {{ row?.delivery_address_details.line_1 }}
                              {{ row?.delivery_address_details.line_2 }}
                          </h3>
                          <h3>
                            <b
                              >Delivery Confirmation: In Person @
                              {{
                                row?.desired_delivery_time | date: "hh:mm a"
                              }}</b
                            >
                          </h3>

                          <h3 *ngIf="row?.group">
                            Group Order
                            <ul>
                              <li *ngFor="let grp of row?.group">
                                {{ grp.first_name }}  {{ grp.last_name }} : ${{grp.amount_paid}} : {{grp.context}}
                              </li>
                            </ul>
                          </h3>
                          <!-- <ng-template #loaddata>
                            <p>Please wait item details loading .....</p>
                          </ng-template> -->
                        </div>
                      </ng-template>
                    </ngx-datatable-row-detail>

                    <ngx-datatable-column name="#" [width]="40">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="customCheck{{ row.id }}"
                            name="example1"
                          />
                          <label
                            class="custom-control-label"
                            for="customCheck{{ row.id }}"
                          ></label>
                        </div>
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Status" [width]="140">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        <!-- <a href="javascript:void(0)" class="order-status text-captialize" *ngIf="row.order_detail.status == 'complete'"
                          style="background-color: red; color:#fff;">{{row.order_detail.status}}</a> -->

                        <a
                          style="background-color: #22c6ab; color: #fff"
                          class="
                            order-status
                            text-capitalize
                            btn
                            w-100
                            border-0
                          "
                          *ngIf="row?.order_detail?.status"
                          >{{ row?.status }}</a
                        >
                        <!-- <a style="background-color: #ef6e6e; color:#fff;"
                          class="order-status text-capitalize btn w-100 border-0"
                          *ngIf="row?.status == 'order_paid'">{{row?.status}}</a>

                        <a style="background-color: #ffbc34; color:#fff;"
                          class="order-status text-capitalize btn w-100 border-0"
                          *ngIf="row?.status == 'incomplete'">{{row?.status}}</a>

                        <a style="background-color: #22c6ab; color:#fff;"
                          class="order-status text-capitalize btn w-100 border-0"
                          *ngIf="row?.status == 'order_requested'">{{row?.status}}</a> -->
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Date" [width]="110">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        {{ row?.initiation_time | date: "MMM d" }}
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Order ID" [width]="62">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        {{ row?.order_id | custompipe: row.order_id }}
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Payment" [width]="70">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        <!-- {{row?.context}} -->
                        <img
                          *ngIf="row?.context == 'cod'"
                          src="assets/images/cash.png"
                          alt="Icon"
                          style="height: 36px"
                        />
                        <img
                          *ngIf="row?.context == 'Bank'"
                          src="assets/images/bank.png"
                          alt="Icon"
                          style="height: 36px"
                        />
                        <img
                          *ngIf="row?.context == 'card'"
                          src="assets/images/card.png"
                          alt="Icon"
                          style="height: 36px"
                        />
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Order Amt" [width]="92">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        <!-- <p>${{row?.amount?.toFixed(2)}}</p> -->
                        <p>${{ row?.amount }}</p>
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Vendor" [width]="80">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        {{ row?.short_name }}
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column name="Actions" [width]="135">
                      <ng-template let-row="row" ngx-datatable-cell-template>
                        <div *ngIf="row?.context == 'Bank'">
                          <button
                            type="button"
                            class="btn btn-info btn-circle btn-sm"
                            (click)="orderAction('Refund', row)"
                          >
                            <i class="fa fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="btn btn-danger btn-circle btn-sm"
                            (click)="orderAction('Void', row)"
                          >
                            <i class="fa fa-times"></i>
                          </button>
                        </div>

                        <div *ngIf="row?.context == 'card'">
                          <button
                            type="button"
                            class="btn btn-info btn-circle btn-sm"
                            (click)="orderAction('Refund', row)"
                          >
                            <i class="fa fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="btn btn-danger btn-circle btn-sm"
                            (click)="orderAction('Void', row)"
                          >
                            <i class="fa fa-times"></i>
                          </button>
                        </div>

                        <div *ngIf="row?.context == 'cod'">
                          <button
                            type="button"
                            class="btn btn-danger btn-circle btn-sm"
                            (click)="orderAction('Void', row)"
                          >
                            <i class="fa fa-times"></i>
                          </button>
                        </div>
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-column
                      [width]="50"
                      [resizeable]="false"
                      [sortable]="false"
                      [draggable]="false"
                      [canAutoResize]="true"
                      [frozenLeft]="true"
                    >
                      <ng-template
                        let-row="row"
                        let-expanded="expanded"
                        ngx-datatable-cell-template
                      >
                        <a
                          href="javascript:void(0)"
                          [class.datatable-icon-right]="!expanded"
                          [class.datatable-icon-down]="expanded"
                          title="Expand/Collapse Row"
                          class="expan-icon"
                          id="{{ row.id }}"
                          (click)="toggleExpandRow(row,'table')"
                        >
                        </a>
                      </ng-template>
                    </ngx-datatable-column>

                    <ngx-datatable-footer>
                      <!-- [class.datatable-icon-down]="row.$$expanded" [class.datatable-icon-down]="!row.$$expanded" -->
                      <ng-template
                        let-rowCount="rowCount"
                        let-pageSize="pageSize"
                        let-selectedCount="selectedCount"
                        let-curPage="curPage"
                        let-offset="offset"
                        ngx-datatable-footer-template
                      >
                        <!-- <button type="button" class="btn btn-success ml-2 custom-button">Void</button>
                        <button type="button" class="btn btn-warning ml-2 custom-button">Refund</button>-->
                        <!-- <button type="button" class="btn btn-danger ml-2 custom-button">Delete</button>  -->
                        <datatable-pager
                          [pagerLeftArrowIcon]="'datatable-icon-left'"
                          [pagerRightArrowIcon]="'datatable-icon-right'"
                          [pagerPreviousIcon]="'datatable-icon-prev'"
                          [pagerNextIcon]="'datatable-icon-skip'"
                          [page]="curPage"
                          [visiblePagesCount]="currentVisible"
                          [size]="pageSize"
                          [count]="rowCount"
                          [hidden]="false"
                          (change)="table.onFooterPage($event)"
                        >
                        </datatable-pager>
                      </ng-template>
                    </ngx-datatable-footer>
                  </ngx-datatable>
                </div>
              </div>
            </ng-template>
          </ngb-tab>

          <ngb-tab title="Daily Payouts">
            <ng-template ngbTabContent>
              <!-- <h6 class="text-center mt-3 mb-0">Bank and CC Orders</h6>
              <div class="row mt-3 mb-0">
                <div class="col-md-3 offset-4">
                  <div class="card mb-0">
                    <div class="card-body text-center">
                      <strong>COD Balance:</strong>
                      <span class="pl-2">${{codBalance?.toFixed(2)}}</span>
                    </div>
                  </div>
                </div>
              </div> -->
              <div class="card-body">
                <div class="text-center">
                  <label>Select Date</label> &nbsp;
                  <input
                      type="date"
                      style="height: 32px; color: #24c6ab"
                      [(ngModel)]="datecurrentDailyPayout"
                      (change)="datePickForDailyPayout($event)"
                      [ngModelOptions]="{ standalone: true }"
                  />
               </div>
                <div *ngFor="let payout of dailyPayoutData; let i = index">
                  <h2 class="text-center"><strong>{{payout.membername}}</strong></h2>
                  <!-- <div *ngFor="let payout of dailyPayoutData">  -->
                  <!-- {{payout.data[0].tip_amount}} -->
                  <h3 style="text-align: center"><b> Bank (Green Money)</b></h3>
                  <div *ngIf="payout">
                    <!-- <p style="text-align: center;">Cash On Delivery</p> -->
                    <div class="accodion-datatable">
                      <!-- {{payout.data[0].unit_id}} -->
                      <!-- <ngx-datatable class="material" #table [rows]="dailyPayoutData[i]" [columnMode]="'force'" -->
                      <ngx-datatable
                        class="material"
                        #dailyPayoutBank
                        [rows]="payout.data.bank"
                        [columnMode]="'force'"
                        [headerHeight]="50"
                        [footerHeight]="50"
                        [rowHeight]="auto"
                        [limit]="5"
                        [scrollbarH]="true"
                        (activate)="dailyPayoutonActivatebank($event,i)"
                      >
                        <!-- Row Detail Template -->

                        <ngx-datatable-row-detail [rowHeight]="auto">
                          <ng-template
                            let-row="row"
                            let-expanded="expanded"
                            ngx-datatable-row-detail-template
                          >
                            <div
                              style="padding-left: 58px"
                              *ngIf="row?.for_delivery; else takeout"
                            >
                              <h6 class="col-md-6 pl-0" style="font-size: 15px">
                                Itemized Charges
                              </h6>
                              <div class="row">
                                <div class="col-md-2">Instamarkt(10%)</div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.instaMarkt_commission }}
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-2">Delivery Charge</div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.delivery_charge }}
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-2">Tip</div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.tip_amount }}
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-2">Bank Processing</div>
                                <span>:</span>
                                <div
                                  class="col-md-2"
                                  *ngIf="row.bank_processing"
                                >
                                  ${{ row?.bank_processing }}
                                </div>
                                <div
                                  class="col-md-2"
                                  *ngIf="!row.bank_processing"
                                >
                                  $0
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-3 pl-0">
                                  <hr />
                                </div>
                              </div>
                              <div class="row mb-2">
                                <div class="col-md-2">
                                  <b>Total Deductions</b>
                                </div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.deduction }}
                                </div>
                              </div>
                              
                            </div>
                            <ng-template #takeout>
                              <div style="padding-left: 58px">
                                <h6 class="col-md-2 pl-0">Itemized Charges</h6>
                                <div class="row">
                                  <div class="col-md-2">Instamarkt(5%)</div>
                                  <span>:</span>
                                  <div class="col-md-2">
                                    {{ row?.instaMarkt_commission }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-2">Tip</div>
                                  <span>:</span>
                                  <div class="col-md-2">
                                    ${{ row?.tip_amount }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-2">Bank Processing</div>
                                  <span>:</span>
                                  <div
                                    class="col-md-2"
                                    *ngIf="row.bank_processing"
                                  >
                                    ${{ row?.bank_processing }}
                                  </div>
                                  <div
                                    class="col-md-2"
                                    *ngIf="!row.bank_processing"
                                  >
                                    $0
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-3 pl-0">
                                    <hr />
                                  </div>
                                </div>
                                <div class="row mb-2">
                                  <div class="col-md-2">
                                    <b>Total Deductions</b>
                                  </div>
                                  <span>:</span>
                                  <div class="col-md-2">
                                    ${{ row?.deduction }}
                                  </div>
                                </div>
                              </div>
                            </ng-template>
                          </ng-template>
                        </ngx-datatable-row-detail>

                        <!-- <ngx-datatable-column name="#" [width]="40">
                          <ng-template let-row="row" ngx-datatable-cell-template>
                            <div class="custom-control custom-checkbox" *ngIf="row?.status != 'Proccesed'">
                              <input type="checkbox" class="custom-control-input" id="customCheck{{row.id}}"
                                name="example1">
                              <label class="custom-control-label" for="customCheck{{row.id}}"></label>
                            </div>
                          </ng-template>
                        </ngx-datatable-column> -->

                        <ngx-datatable-column name="Status" [width]="158">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <a
                              style="background-color: #ef6e6e; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'complete'"
                              >{{ row?.status }}</a
                            >

                            <a
                              style="background-color: #ffbc34; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'processed'"
                              >{{ row?.status }}</a
                            >

                            <a
                              style="background-color: #22c6ab; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'new'"
                              >{{ row?.status }}</a
                            >

                            <a
                              style="background-color: #22c6ab; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'incomplete'"
                              >{{ row?.status }}</a
                            >
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Date" [width]="70">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            {{ row?.created_at | date: "MMM d" }}
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Order ID" [width]="62">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            {{ row?.id | custompipe: row.id }}
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Driver" [width]="62">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            {{ row?.driver?.first_name}} {{ row?.driver?.last_name}}
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Method" [width]="70">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <!-- {{row?.context}} -->
                            <img
                              src="assets/images/bank.png"
                              alt="Icon"
                              style="height: 36px"
                            />
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Order Amt" [width]="92">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>${{ row?.total_order_amount }}</p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Meal" [width]="60">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>${{ row?.amount }}</p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Type" [width]="50">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <img
                              src="/assets/images/deliverySmall.png"
                              class="img-responsive"
                              *ngIf="row?.for_delivery; else takeoutimg"
                            />
                            <ng-template #takeoutimg>
                              <img
                                src="/assets/images/takeout.png"
                                class="img-responsive"
                              />
                            </ng-template>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Deductions" [width]="92">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>${{ row?.deduction }}</p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Balance" [width]="92">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>
                              ${{
                                row?.amount - row?.deduction | number: "1.2-2"
                              }}
                            </p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column [width]="40">
                          <ng-template
                            let-row="row"
                            let-expanded="expanded"
                            ngx-datatable-cell-template
                          >
                            <a
                              href="javascript:void(0)"
                              [class.datatable-icon-down]="!row.$$expanded"
                              [class.datatable-icon-down]="row.$$expanded"
                              title="Expand/Collapse Row"
                              id="{{ row.id }}"
                              class="expan-icon"
                              (click)="toggleExpandRowDailyout(row,i)"
                            >
                            </a>
                          </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-footer>
                          <ng-template
                            let-rowCount="rowCount"
                            let-pageSize="pageSize"
                            let-selectedCount="selectedCount"
                            let-curPage="curPage"
                            let-offset="offset"
                            ngx-datatable-footer-template
                          >
                            <!-- <button *ngIf="row?.order_detail?.status != 'processed'" type="button" class="btn btn-success ml-2 custom-button">Process Selected
                              Orders</button> -->
                            <datatable-pager
                              [pagerLeftArrowIcon]="'datatable-icon-left'"
                              [pagerRightArrowIcon]="'datatable-icon-right'"
                              [pagerPreviousIcon]="'datatable-icon-prev'"
                              [pagerNextIcon]="'datatable-icon-skip'"
                              [page]="curPage"
                              [visiblePagesCount]="currentVisible"
                              [size]="pageSize"
                              [count]="rowCount"
                              [hidden]="false"
                              (change)="table.onFooterPage($event)"
                            >
                            </datatable-pager>
                          </ng-template>
                        </ngx-datatable-footer>
                      </ngx-datatable>
                    </div>
                    <h3  style="text-align: right">
                      <strong>Total Due: ${{ payout?.data?.total_online }}</strong>
                    </h3>
                  </div>
                  <!-- ----------------------------start -->
                  <div>
                    <h3 style="text-align: center">
                      <b> Cash on Delivery (COD) </b>
                    </h3>
                    <div class="accodion-datatable">
                      <ngx-datatable
                        class="material"
                        #dailyPayoutCod
                        [rows]="payout.data.cod"
                        [columnMode]="'force'"
                        [headerHeight]="50"
                        [footerHeight]="50"
                        [rowHeight]="auto"
                        [limit]="5"
                        [scrollbarH]="true"
                        (activate)="dailyPayoutonActivateCod($event,i)"
                      >
                        <!-- Row Detail Template -->

                        <ngx-datatable-row-detail [rowHeight]="auto">
                          <ng-template
                            let-row="row"
                            let-expanded="expanded"
                            ngx-datatable-row-detail-template
                          >
                            <div
                              style="padding-left: 58px"
                              *ngIf="row?.for_delivery; else takeout"
                            >
                              <h6 class="col-md-6 pl-0" style="font-size: 15px">
                                Itemized Charges
                              </h6>
                              <div class="row">
                                <div class="col-md-2">Instamarkt(10%)</div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.instaMarkt_commission }}
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-2">Delivery Charge</div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.delivery_charge }}
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-2">Tip</div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.tip_amount }}
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-3 pl-0">
                                  <hr />
                                </div>
                              </div>
                              <div class="row mb-2">
                                <div class="col-md-2">
                                  <b>Total Deductions</b>
                                </div>
                                <span>:</span>
                                <div class="col-md-2">
                                  ${{ row?.deduction }}
                                </div>
                              </div>
                            </div>
                            <ng-template #takeout>
                              <div style="padding-left: 58px">
                                <h6 class="col-md-2 pl-0">Itemized Charges</h6>
                                <div class="row">
                                  <div class="col-md-2">Instamarkt(5%)</div>
                                  <span>:</span>
                                  <div class="col-md-2">
                                    {{ row?.instaMarkt_commission }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-2">Tip</div>
                                  <span>:</span>
                                  <div class="col-md-2">
                                    ${{ row?.tip_amount }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-2">Bank Processing</div>
                                  <span>:</span>
                                  <div
                                    class="col-md-2"
                                    *ngIf="row.bank_processing"
                                  >
                                    ${{ row?.bank_processing }}
                                  </div>
                                  <div
                                    class="col-md-2"
                                    *ngIf="!row.bank_processing"
                                  >
                                    $0
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-3 pl-0">
                                    <hr />
                                  </div>
                                </div>
                                <div class="row mb-2">
                                  <div class="col-md-2">
                                    <b>Total Deductions</b>
                                  </div>
                                  <span>:</span>
                                  <div class="col-md-2">
                                    ${{ row?.deduction }}
                                  </div>
                                </div>
                              </div>
                            </ng-template>
                          </ng-template>
                        </ngx-datatable-row-detail>

                        <!-- <ngx-datatable-column name="#" [width]="40">
                          <ng-template let-row="row" ngx-datatable-cell-template>
                            <div class="custom-control custom-checkbox" *ngIf="row?.status != 'Proccesed'">
                              <input type="checkbox" class="custom-control-input" id="customCheck{{row.id}}"
                                name="example1">
                              <label class="custom-control-label" for="customCheck{{row.id}}"></label>
                            </div>
                          </ng-template>
                        </ngx-datatable-column> -->

                        <ngx-datatable-column name="Status" [width]="158">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <a
                              style="background-color: #ef6e6e; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'complete'"
                              >{{ row?.status }}</a
                            >

                            <a
                              style="background-color: #ffbc34; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'processed'"
                              >{{ row?.status }}</a
                            >

                            <a
                              style="background-color: #22c6ab; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'new'"
                              >{{ row?.status }}</a
                            >

                            <a
                              style="background-color: #22c6ab; color: #fff"
                              class="
                                order-status
                                text-capitalize
                                btn
                                w-100
                                border-0
                              "
                              *ngIf="row?.order_detail?.status == 'incomplete'"
                              >{{ row?.status }}</a
                            >
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Date" [width]="70">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            {{ row?.created_at | date: "MMM d" }}
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Order ID" [width]="62">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            {{ row?.id | custompipe: row.id }}
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Driver" [width]="62">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            {{ row?.driver?.first_name}} {{ row?.driver?.last_name}}
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Method" [width]="70">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <!-- {{row?.context}} -->
                            <img
                              src="assets/images/cash.png"
                              alt="Icon"
                              style="height: 36px"
                            />
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Order Amt" [width]="92">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>${{ row?.total_order_amount }}</p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Meal" [width]="60">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>${{ row?.amount }}</p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Type" [width]="50">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <img
                              src="/assets/images/deliverySmall.png"
                              class="img-responsive"
                              *ngIf="row?.for_delivery; else takeoutimg"
                            />
                            <ng-template #takeoutimg>
                              <img
                                src="/assets/images/takeout.png"
                                class="img-responsive"
                              />
                            </ng-template>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Deductions" [width]="92">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>${{ row?.deduction }}</p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Balance" [width]="92">
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <p>
                              ${{
                                row?.amount - row?.deduction | number: "1.2-2"
                              }}
                            </p>
                          </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column [width]="40">
                          <ng-template
                            let-row="row"
                            let-expanded="expanded"
                            ngx-datatable-cell-template
                          >
                            <a
                              href="javascript:void(0)"
                              [class.datatable-icon-down]="!row.$$expanded"
                              [class.datatable-icon-down]="row.$$expanded"
                              title="Expand/Collapse Row"
                              id="{{ row.id }}"
                              class="expan-icon"
                              (click)="toggleExpandRowDailyCod(row,i)"
                            >
                            </a>
                          </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-footer>
                          <ng-template
                            let-rowCount="rowCount"
                            let-pageSize="pageSize"
                            let-selectedCount="selectedCount"
                            let-curPage="curPage"
                            let-offset="offset"
                            ngx-datatable-footer-template
                          >
                            <!-- <button type="button" class="btn btn-success ml-2 custom-button">Process Selected
                              Orders</button> -->
                            <datatable-pager
                              [pagerLeftArrowIcon]="'datatable-icon-left'"
                              [pagerRightArrowIcon]="'datatable-icon-right'"
                              [pagerPreviousIcon]="'datatable-icon-prev'"
                              [pagerNextIcon]="'datatable-icon-skip'"
                              [page]="curPage"
                              [visiblePagesCount]="currentVisible"
                              [size]="pageSize"
                              [count]="rowCount"
                              [hidden]="false"
                              (change)="table.onFooterPage($event)"
                            >
                            </datatable-pager>
                          </ng-template>
                        </ngx-datatable-footer>
                      </ngx-datatable>
                      <h3  style="text-align: right">
                        <strong>Total Ownes : ${{ payout?.data?.total_cod }}</strong>
                      </h3>
                    </div>
                  </div>
                  <!-- ---------------end -->
                  
                  <h2 class="text-center">
                    <strong>
                      Payout: ${{ payout.payout }}
                    </strong>
                  </h2>
                </div>
              </div>
              <div class="card-body" *ngIf="!tab">
                No Daily Payout Data Available 
              </div>
            </ng-template>
          </ngb-tab>

          <ngb-tab title="Weekly Reconciliation">
            <ng-template ngbTabContent>
              <div class="card-body">
                <app-weekly-recon-tab></app-weekly-recon-tab>
               </div>
            </ng-template>
          </ngb-tab>

          <ngb-tab title="Drivers">
            <ng-template ngbTabContent>
              <div class="card-body">
                 <app-driver-tab></app-driver-tab>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
    </div>
  </div>
</div>

<ng-template #subsidy let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Subsidy Calculation</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
      id="closeModal"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-md-6 text-right pr-1">
        <b>Total Wages (All Drivers)</b><span>:</span>
      </div>
      <div class="col-md-3 pl-0">{{ subsidyTotalDeliveryWages }}</div>
      <!-- <span><strong>Total delivery wages:</strong> </span><span>{{subsidyTotalDeliveryWages}}</span> -->
    </div>
    <div class="row">
      <div class="col-md-6 text-right pr-1">
        <b>({{ subsidyUnitName }}) Deliveries</b><span>:</span>
      </div>
      <div class="col-md-3 pl-0">{{ subsidyUnitsOrder }}</div>
      <!-- <span><strong>Total delivery wages:</strong> </span><span>{{subsidyTotalDeliveryWages}}</span> -->
    </div>
    <div class="row">
      <div class="col-md-6 text-right pr-1">
        <b>Total ({{ commasUnitName }}) Deliveries</b><span>:</span>
      </div>
      <div class="col-md-3 pl-0">{{ subsidyTotalDeliveryCount }}</div>
      <!-- <span><strong>Total delivery wages:</strong> </span><span>{{subsidyTotalDeliveryWages}}</span> -->
    </div>

    <div class="row">
      <div class="col-md-6 text-right pr-1">
        <b>Subsidy calculate</b><span>:</span>
      </div>
      <div class="col-md-6 pl-0">
        {{ subsidyTotalDeliveryWages }} * ({{ subsidyUnitsOrder }} /
        {{ subsidyTotalDeliveryCount }}) =
        {{
          (subsidyTotalDeliveryWages * subsidyUnitsOrder) /
            subsidyTotalDeliveryCount
        }}
      </div>
      <!-- <span><strong>Total delivery wages:</strong> </span><span>{{subsidyTotalDeliveryWages}}</span> -->
    </div>
  </div>
  <div class="modal-footer" style="border-top: 0"></div>
</ng-template>
